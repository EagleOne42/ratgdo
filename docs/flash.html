<!DOCTYPE html>
<html>
<body>
    <h1>ratgdo web installer for mqtt integrations</h1>
	<h2>Choose the right version for your ratgdo hardware!</h2>
	<script src="jquery-3.6.0.min.js"></script>
	<script
	  type="module"
	  src="https://unpkg.com/esp-web-tools@9.0.5/dist/web/install-button.js?module"
	></script>
	<style type="text/css">
		* {
			font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
		}
	</style>
	
	<label for="selectManifest">Choose version:</label>
	<select id="selectManifest" onchange="setManifest()">
		<option value="">Please Choose Firmware Version:</option>
		<optgroup label="Black v2.5 Boards Only">
			<option value="flasher/manifest_v25.json">ratgdo v2.55, Security + 1.0, 2.0 & Dry Contact</option>
		</optgroup>
		<optgroup label="White v2.0 Boards Only">
			<option value="flasher/manifest_v2.json">ratgdo v2.25, Security + 2.0</option>
			<option value="flasher/manifest_v2_no_wifi.json">ratgdo v2.25, Security + 2.0 (WiFi disabled)</option>
		</optgroup>
		<optgroup label="Blue v1.0 Boards Only">
			<option value="flasher/manifest_v1.json">ratgdo v1.8, Security + 2.0</option>
			<option value="flasher/manifest_v1_no_wifi.json">ratgdo v1.8, Security + 2.0 (WiFi disabled)</option>
		</optgroup>
		<!-- <optgroup label="Debugging">
			<option value="flasher/manifest_serial_dump.json">secplus 1.0 serial dump</option>
		</optgroup> -->
		<!-- <option value="flasher/manifest_alpha.json">ratgdo v1.71a</option> -->
	</select>
	<br/>
	
	<h4>ESP Home:</h4>
	<p>If you want to use ESPHome with Home Assistant instead of MQTT, check out the <a href="https://ratgdo.github.io/esphome-ratgdo/" target="_blank">ESPHome port</a> & <a href="https://github.com/ratgdo/esphome-ratgdo">GitHub Repo</a>.</p>

	<p>For a comparison of available features for the different firmware options, please refer to the <a href="https://paulwieland.github.io/ratgdo/01_features.html">feature matrix</a>.</p>

	<!-- <h4>Native HomeKit:</h4>
	<p>A native HomeKit version of ratgdo is in development <a href="https://ratgdo.github.io/homekit-ratgdo/" target="_blank">HomeKit port</a> & <a href="https://github.com/ratgdo/esphome-ratgdo">GitHub Repo</a>.</p> -->

	
	<h4>Drivers</h4>
	<p>If you can't connect to your ratgdo board make sure you have the right driver installed for the type of board you have.</p>
	<ul>
		<li>ratgdo v2.5i uses a CH340 USB to Serial chipset. [<a href="https://www.wch-ic.com/downloads/CH341SER_EXE.html" target="_blank">driver download</a>]</li>
		<li>Most D1 Minis use an FTDI USB to Serial chipset. [<a href="https://ftdichip.com/drivers/vcp-drivers/" target="_blank">driver download</a>]</li>
	</ul>

	<h5>Downloading firmware files for OTA Updates</h5>
	<p>In order to do an OTA update, you have to download the .bin file to your computer and then upload it to the ratgdo web server.</p>
	<p>The firmware bin files are located <a href="https://github.com/PaulWieland/ratgdo/tree/main/docs/flasher">here</a>.</p>

    <esp-web-install-button manifest="" id="manifest"></esp-web-install-button>
	<script>
		var manifest = $("#manifest").attr("manifest",`flasher/manifest.json`);

		function setManifest(){
			if($("#selectManifest").val() === ""){
				alert("Please choose a firmware from the drop down.");
				$("esp-web-install-button").hide();
			}else{
				$("esp-web-install-button").show();
			}

			$("#manifest").attr("manifest",$("#selectManifest").val());
		}

		$("esp-web-install-button").hide();
	</script>
</body>
</html>
